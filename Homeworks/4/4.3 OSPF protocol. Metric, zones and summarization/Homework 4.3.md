## Домашнее задание к занятию "Протокол OSPF. Метрика, зоны и суммаризация"  

---

### Задание 1

Исходя из топологии на картинке, определите тип всех маршрутизаторов (internal, backbone, ABR).  
Файл с изначальной конфигурацией маршрутизаторов можете найти [здесь]( https://github.com/netology-code/drut-homeworks/blob/main/4-03/homework_4_3_routers_config.txt ) - 

![image](https://github.com/netology-code/drut-homeworks/blob/main/4-03.png?raw=true)  

*Приведите список маршрутизаторов R1, R2, R3, R4, R5, R6, R7 c указанием их типов.*

### Ответ.  

Исходя из топологии полагаю:  
R1, R4, R5, R6, R7 - internal    
R2 и R3 - ABR  
R2 и R3 - Backbone  

---  

### Задание 2

По топологии из Задания 1, определите метрику маршрута на маршрутизаторе R1 для сети 4.4.4.4/24 маршрутизатора R4 через путь R1-R2-R4 и R1-R3-R4. 

1) Какая метрика будет у данных маршрутов?
2) Какой или какие из этих маршрутов будут установлены в таблицу маршрутизатора R1? 
Для оптимальной передачи трафика, маршрут до 4.4.4.4 должен проходить только через R1-R3-R4. 
3) Является ли ситуация в таблице маршрутизации оптимальной? Если нет, то каким образом можно исправить ситуацию и на каких маршрутизаторах необходимо внести изменения?
На маршрутизаторах сделана конфигурация для анонса сети и установления соседства. Дополнительные настройки по умолчанию.

*Приведите ответы на вопросы в свободной форме. В вопросе 3, если необходима конфигурация на маршрутизаторах, то приведите команды, которые необходимо применить и на каких маршрутизаторах.*

### Ответ.  

1. У обоих маршрутов стоимость 3.  
2. В таблицу попадут оба маршрута, но чтобы трафик проходил через R1-R3-R4, нужно увеличить параметр Reference bandwidth на участке R2-R4, подняв этим стоимость соседнего маршрута R1-R2-R4.  
3. Не меняя Reference bandwidth пути будут неоптимальные. Как было указано, нужно увеличить параметр Reference bandwidth.  
Команду `auto-cost reference-bandwidth 1000` необходимо выполнить на всех маршрутизаторах домена, чтобы протокол OSPF мог правильно выбирать кратчайшие пути к сетям назначения.  

---  

### Задание 3 

По топологии из Задания 1, сеть 172.16.1.0/24 анонсируется в OSPF через R4 и R5. 
1) Какой путь или пути ( R1-R5, R1-R2-R4, R1-R3-R4)  выберет R1 для данного маршрута? Почему? Соседства между R4-R5 нет.
2) Какие метрики для данного маршрута будет у R1 для данного маршрута через каждый путь? Конфигурация по умолчанию.
3) Какие изменения конфигурации необходимо сделать, чтоб правильно учитывалась пропускная способность каждого линка на этих путях?  
4) После того как будет учитываться правильно каждый линк, изменится ли ситуация с выбором маршрута на R1? Почему?
 
*Приведите ответы на вопросы в свободной форме. В вопросе 3, напишите точно какую/какие команды необходимо использовать на маршрутизаторах*

### Ответ.  

1. и 2. R1 выберет R1-R2-R4 или R1-R3-R4, т.к. стоимость маршрута при настройках по умолчанию равна 4.  
У маршрута R1-R5 стоимость 110.  
3. и 4. Поскольку минимальную стоимость в одну единицу имеют соединения FastEthernet, GigabitEthernet и 10 GigabitEthernet, то при выборе между такими соединениями протокол OSPF не сможет корректно прокладывать маршрут.  
Поэтому необходимо изменить значения метрики, что реализуется командой `auto-cost reference-bandwidth 1000`.  
В этом случае стоимость в 1 единицу будут иметь соединения GigabitEthernet и 10GigabitEthernet, стоимость соединения FastEthernet будет равна - 10 единицам.   
Если ввести команду `auto-cost reference-bandwidth 10000`, то стоимость в 1 единицу будет иметь соединение 10 GigabitEthernet.  
Команду auto-cost reference-bandwidth необходимо выполнять на всех маршрутизаторах.  

### Доработка.  

Маршруты R1-R2-R4 и R1-R3-R4 будут внешними, R1-R5 внутренний. Внутренний будет приоритетнее при настройках по умолчанию.

---